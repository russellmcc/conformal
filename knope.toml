[packages.conformal_vst_wrapper]
versioned_files = ["rust/vst-wrapper/Cargo.toml", "Cargo.lock"]
changelog = "rust/vst-wrapper/CHANGELOG.md"

[packages.conformal_macos_bundle]
versioned_files = ["rust/macos-bundle/Cargo.toml", "Cargo.lock"]
changelog = "rust/macos-bundle/CHANGELOG.md"

[packages.conformal_preferences]
versioned_files = [
    "rust/preferences/Cargo.toml",
    { path = "rust/ui/Cargo.toml", dependency = "conformal_preferences" },
    "Cargo.lock"
]
changelog = "rust/preferences/CHANGELOG.md"

[packages.conformal_component]
versioned_files = [
    { path = "rust/vst-wrapper/Cargo.toml", dependency = "conformal_component" },
    "rust/component/Cargo.toml",
    { path = "rust/ui/Cargo.toml", dependency = "conformal_component" },
    { path = "rust/core/Cargo.toml", dependency = "conformal_component" },
    { path = "rust/poly/Cargo.toml", dependency = "conformal_component" },
    "Cargo.lock"
]
changelog = "rust/component/CHANGELOG.md"

[packages.conformal_ui]
versioned_files = [
    { path = "rust/vst-wrapper/Cargo.toml", dependency = "conformal_ui" },
    "rust/ui/Cargo.toml",
    "Cargo.lock"
]
changelog = "rust/ui/CHANGELOG.md"

[packages.conformal_core]
versioned_files = [
    { path = "rust/vst-wrapper/Cargo.toml", dependency = "conformal_core" },
    { path = "rust/ui/Cargo.toml", dependency = "conformal_core" },
    "rust/core/Cargo.toml",
    "Cargo.lock"
]
changelog = "rust/core/CHANGELOG.md"

[packages.conformal_poly]
versioned_files = ["rust/poly/Cargo.toml", "Cargo.lock"]
changelog = "rust/poly/CHANGELOG.md"

[[workflows]]
name = "release"

[[workflows.steps]]
type = "PrepareRelease"
ignore_conventional_commits = true

[[workflows.steps]]
type = "Command"
command = 'git commit -m "knope: automatically prepare release"'

[[workflows.steps]]
type = "Command"
command = "git push"

[[workflows.steps]]
type = "Release"

[[workflows]]
name = "document-change"

[[workflows.steps]]
type = "CreateChangeFile"

[github]
owner = "russellmcc"
repo = "conformal"
